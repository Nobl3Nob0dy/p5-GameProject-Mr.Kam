<html>
    <head>
        <title>p5_S1_L6</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.min.js" integrity="sha512-gQVBYBvfC+uyor5Teonjr9nmY1bN+DlOCezkhzg4ShpC5q81ogvFsr5IV4xXAj6HEtG7M1Pb2JCha97tVFItYQ==" crossorigin="anonymous"></script>
    </head>
    <body>
        <style>
            body {
                overflow: hidden;
                margin:0px;
                padding: 0px;
            }
        </style>
        <script>
            // Set height and width of canvas
            var w = window.innerWidth;
            var h = window.innerHeight;
            // Set player
            var player;
            // Set enemy
            var enemy;
            // set player huit to false
            var hit = false;

            function setup() {
                createCanvas(w,h);
                // bind declarations
                player = new player ();
                enemy = new enemy ();
            }

            function draw () {
                clear();
                // call player
                player.show();
                player.update();
                if (keyIsDown(87)){
                    player.up();
                }
                if (keyIsDown(65)){
                    player.left();
                }
                if (keyIsDown(68)){
                    player.right();
                }
                if (keyIsDown(83)){
                    player.down();
                }
                enemy.show();
                enemy.update(); 
            }

            function player() {
                // Acceleration
                this.aX = accelerationX;
                this.aY = accelerationY;
                    
                this.xMultiplier = 0.05;
                this.yMultiplier = 0.08;

                this.vX = this.velocity + this.aX;
                this.vY = this.velocity + this.aY

                this.x = this.x + this.vX * this.xMultiplier;
                this.y = this.y + this.vY * this.yMultiplier;
                // define start pos
                this.x = w/2;
                this.y = h/2;
                // gravity force
                this.gravity = 0.4;
                // movement force
                this.lift = -5;
                this.move = -15;
                // velocity of player
                this.velocity = 0;
                // show object
                this.show = function () {
                    fill(color('red'));
                    ellipse(this.x, this.y, 50, 50);
                }
                this.update = function () {
                    // add gravity add to velocity
                    this.velocity += this.gravity;
                    // direction of grav
                    this.y += this.velocity;
                    // resistance, enviromental res
                    this.velocity *= 0.9; 
                    // stop player from clipping through ground
                    if (this.y > h-25) {
                        this.y = h-25;
                        this.velocity = 0;
                    }
                    if (this.y < 25) {
                        this.y = 25;
                        this.velocity = 0;
                    }
                    if (this.x > w-25) {
                        this.x = w-25;
                        this.velocity = 0;
                    }
                    if (this.x < 25) {
                        this.x = 25;
                        this.velocity = 0;
                    }

                }
                this.up = function () {
                    // action when a player jumps
                    this.velocity += this.lift;
                }
                this.left = function () {
                    this.x += this.move;
                }
                this.right = function () {
                    this.x -= this.move;
                }
                this.down = function () {
                    this.velocity -= this.lift;
                }
            }

            function enemy() {
                // Set size of the object
                this.s = 50;
                // set starting direction
                this.xdirection = 1;
                this.ydirection = 1;
                // define start pos
                this.x = w - this.s;
                this.y = random(50, h - this.s);
                // gravity force
                this.gravity = 0.5;
                // velocity of player
                this.velocity = 0;
                this.show = function () {
                    fill(color('blue'));
                    rect(this.x, this.y, this.s);
                }
                this.update = function () {
                    // add gravity to velocity
                    this.velocity += this.gravity;
                    // resistance, enviromental res
                    this.velocity *= 0.9; 
                    // update direction
                    this.x = this.x + this.velocity * this.xdirection;
                    this.y = this.y + this.velocity * this.ydirection;
                    // set direction after bounceing
                    if (this.x > w - this.s || this.x < this.s) {
                        this.xdirection *= -1;
                    }
                    if (this.y > h - this.s || this.y < this.s){
                        this.ydirection *= -1;
                    }
                }
            }
        </script>
    </body>
</html>